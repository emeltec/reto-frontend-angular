"use strict";(self.webpackChunkreto_frontend=self.webpackChunkreto_frontend||[]).push([[552],{7552:(K,v,a)=>{a.r(v),a.d(v,{UsersModule:()=>X});var f=a(6895),_=a(1981),m=a(7340),h=a(5412);let g,p=256,C=[],b=256;for(;p--;)C[p]=(p+256).toString(16).substring(1);function T(n){let s=0,e=n||11;if(!g||p+e>2*b)for(g="",p=0;s<b;s++)g+=C[256*Math.random()|0];return g.substring(p,p+++e)}var t=a(4650),c=a(4006),w=a(1135);let x=(()=>{class n{constructor(){this.dataPosts$=new w.X({post:{},nuevo:!1})}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var P=a(3086);let y=(()=>{class n{constructor(e,o,i,r,l){this.fb=e,this.postService=o,this.message=i,this.dialogRef=r,this.data=l,this.formPost=this.fb.group({id:[""],title:[""],description:[""]})}ngOnInit(){this.formPost.patchValue(this.data?.postSelected)}addOrUpdatePost(){const e=this.formPost.value;""!=e.title&&""!=e.description?(""==e.id||null==e.id?this.addPost():this.updatePost(),this.close()):this.message.showMessageError("El t\xedtulo y la descripci\xf3n son obligatorios","")}addPost(){const e=this.formPost.value,o={id:T(),title:e.title,description:e.description};this.postService.dataPosts$.next({post:o,nuevo:!0})}updatePost(){const e=this.formPost.value;this.postService.dataPosts$.next({post:{id:e.id,title:e.title,description:e.description},nuevo:!1})}close(){this.formPost.controls.id.setValue(""),this.formPost.controls.title.setValue(""),this.formPost.controls.description.setValue(""),this.dialogRef.close()}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(c.qu),t.Y36(x),t.Y36(P.K),t.Y36(h.so),t.Y36(h.WI))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-dialog"]],decls:19,vars:3,consts:[[1,"dialog-content"],[1,"dialog-header"],["src","assets/images/icon_close.svg","alt","cerrar",3,"click"],[1,"dialog-body"],[3,"formGroup","ngSubmit"],["type","hidden","formControlName","id"],[1,"form-floating","mb-3"],["type","email","formControlName","title","id","titleInput","autocomplete","off","required","",1,"form-control"],["for","titleInput"],["formControlName","description","id","decsInput","autocomplete","off","rows","3","required","",1,"form-control",3,"maxlength"],["for","decsInput"],[1,"mb-3","text-center"],["type","submit",1,"btn","btn-primary","btn-login","mb-2"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"img",2),t.NdJ("click",function(){return i.close()}),t.qZA()(),t.TgZ(3,"div",3)(4,"h4"),t._uU(5),t.qZA(),t.TgZ(6,"form",4),t.NdJ("ngSubmit",function(){return i.addOrUpdatePost()}),t._UZ(7,"input",5),t.TgZ(8,"div",6),t._UZ(9,"input",7),t.TgZ(10,"label",8),t._uU(11,"T\xedtulo"),t.qZA()(),t.TgZ(12,"div",6),t._UZ(13,"textarea",9),t.TgZ(14,"label",10),t._uU(15,"Descripci\xf3n"),t.qZA()(),t.TgZ(16,"div",11)(17,"button",12),t._uU(18,"Guardar"),t.qZA()()()()()),2&o&&(t.xp6(5),t.Oqu(""!=i.formPost.value.id?"Editar post":"Crear post"),t.xp6(1),t.Q6J("formGroup",i.formPost),t.xp6(7),t.Q6J("maxlength",200))},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.nD,c.sg,c.u],styles:[".dialog-content[_ngcontent-%COMP%]{padding:1.5rem}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:end;padding-bottom:1.5rem}.dialog-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.dialog-body[_ngcontent-%COMP%]{padding:1.5rem}.dialog-body[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:auto!important}"]})}return n})();var D=a(4004),U=a(529);let Z=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://jsonplaceholder.typicode.com/users"}getUsers(){return this.http.get(this.apiUrl).pipe((0,D.U)(e=>this.userDapter(e)))}userDapter(e){return e.map(o=>({id:o.id,name:o.name,username:o.username,email:o.email,phone:o.phone,posts:[]}))}static#t=this.\u0275fac=function(o){return new(o||n)(t.LFG(U.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var O=a(7392),d=a(5717);let M=(()=>{class n{constructor(e){this.router=e,this.userData={username:"",password:""}}ngOnInit(){this.getUserData()}getUserData(){const e=JSON.parse(localStorage.getItem("userdata")||"{}");this.userData=e}logout(){this.router.navigate(["/"]),localStorage.clear()}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(_.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-navbar-private"]],decls:13,vars:1,consts:[[1,"nav"],[1,"container","py-3","d-flex","justify-content-between"],["href","#",1,"navbar-brand"],["src","assets/images/logo_home.svg","alt","logo"],["id","navbarsExampleDefault",1,""],[1,"d-flex"],[1,"me-4","user-info","d-none","d-sm-block"],[1,"welcome"],[1,"username"],["type","button",1,"btn","btn-outline-danger","me-4",3,"click"]],template:function(o,i){1&o&&(t.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),t._uU(8," Bienvenido "),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA()(),t.TgZ(11,"button",9),t.NdJ("click",function(){return i.logout()}),t._uU(12,"Cerrar sesi\xf3n"),t.qZA()()()()()),2&o&&(t.xp6(10),t.hij(" ",i.userData.username," "))},styles:[".user-info[_ngcontent-%COMP%]{display:block}.user-info[_ngcontent-%COMP%]   .welcome[_ngcontent-%COMP%]{font-size:.9rem;color:#707c97}.user-info[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-weight:600;color:#7c3aed}"]})}return n})();function A(n,s){if(1&n&&(t.TgZ(0,"th",12),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e)," ")}}function I(n,s){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){const e=s.$implicit,o=t.oxw().$implicit;t.xp6(1),t.hij(" ",e[o]," ")}}function N(n,s){1&n&&(t.ynx(0,10),t.YNc(1,A,3,3,"th",11),t.YNc(2,I,2,1,"td",5),t.BQk()),2&n&&t.s9C("matColumnDef",s.$implicit)}function S(n,s){1&n&&(t.TgZ(0,"th",14),t._uU(1,"\xa0"),t.qZA())}function E(n,s){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"keyboard_arrow_down"),t.qZA())}function J(n,s){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"keyboard_arrow_up"),t.qZA())}function k(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"td",13)(1,"button",15),t.NdJ("click",function(i){const l=t.CHM(e).$implicit,u=t.oxw();return u.expandedElement=u.expandedElement===l?null:l,t.KtG(i.stopPropagation())}),t.YNc(2,E,2,0,"mat-icon",16),t.YNc(3,J,2,0,"mat-icon",16),t.qZA()()}if(2&n){const e=s.$implicit,o=t.oxw();t.xp6(2),t.Q6J("ngIf",o.expandedElement!==e),t.xp6(1),t.Q6J("ngIf",o.expandedElement===e)}}function Y(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",24)(1,"div")(2,"h4"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA()(),t.TgZ(6,"div")(7,"button",25),t.NdJ("click",function(){const i=t.CHM(e),r=i.index,l=i.$implicit,u=t.oxw(2).$implicit,V=t.oxw();return t.KtG(V.selectPost(u,r,l))}),t._UZ(8,"i",26),t.qZA(),t.TgZ(9,"button",27),t.NdJ("click",function(){const r=t.CHM(e).index,l=t.oxw(2).$implicit,u=t.oxw();return t.KtG(u.deletePost(l.id,r))}),t._UZ(10,"i",28),t.qZA()()()}if(2&n){const e=s.$implicit;t.xp6(3),t.Oqu(null==e?null:e.title),t.xp6(2),t.Oqu(null==e?null:e.description)}}function F(n,s){if(1&n&&(t.TgZ(0,"div",22),t.YNc(1,Y,11,2,"div",23),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.posts)}}function $(n,s){1&n&&(t.TgZ(0,"p"),t._uU(1,"Aun no tienes posts"),t.qZA())}function Q(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"td",13)(1,"div",17)(2,"div",18),t.YNc(3,F,2,1,"div",19),t.TgZ(4,"div",20),t.YNc(5,$,2,0,"p",16),t.TgZ(6,"button",21),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.openDialog(r))}),t._uU(7,"Crear un post"),t.qZA()()()()()}if(2&n){const e=s.$implicit,o=t.oxw();t.uIk("colspan",o.columnsToDisplayWithExpand.length),t.xp6(1),t.Q6J("@detailExpand",e==o.expandedElement?"expanded":"collapsed"),t.xp6(2),t.Q6J("ngIf",(null==e||null==e.posts?null:e.posts.length)>0),t.xp6(2),t.Q6J("ngIf",0==(null==e||null==e.posts?null:e.posts.length))}}function q(n,s){1&n&&t._UZ(0,"tr",29)}function B(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr",30),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.expandedElement=l.expandedElement===r?null:r)}),t.qZA()}if(2&n){const e=s.$implicit,o=t.oxw();t.ekj("example-expanded-row",o.expandedElement===e)}}function j(n,s){1&n&&t._UZ(0,"tr",31)}const R=function(){return["expandedDetail"]},H=[{path:"",component:(()=>{class n{constructor(e,o,i){this.dialog=e,this.userService=o,this.postService=i,this.dataSource=[],this.columnsToDisplay=["name","username","email","phone"],this.columnsToDisplayWithExpand=[...this.columnsToDisplay,"expand"],this.expandedElement=[],this.currentUserId=0,this.editUserId=0,this.editPostIndex=-1}ngOnInit(){this.userService.getUsers().subscribe(e=>{this.dataSource=e}),this.postService.dataPosts$.asObservable().subscribe(e=>{this.addOrUpdate(e)})}openDialog(e,o){this.currentUserId=e.id,this.dialog.open(y,{disableClose:!0,width:"640px",enterAnimationDuration:"300ms",exitAnimationDuration:"300ms",data:{user:e,postSelected:o}})}addOrUpdate(e){e.nuevo?this.addPost(e.post):this.updatePost(e.post),this.editUserId=0}addPost(e){this.dataSource.find(o=>o.id===this.currentUserId)?.posts.push(e)}updatePost(e){this.dataSource.find(o=>o.id===this.editUserId)?.posts.splice(this.editPostIndex,1,e)}deletePost(e,o){this.dataSource.find(i=>i.id===e)?.posts.splice(o,1)}selectPost(e,o,i){this.editUserId=e.id,this.editPostIndex=o,this.openDialog(e,i)}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(h.uw),t.Y36(Z),t.Y36(x))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-users"]],decls:12,vars:6,consts:[[1,"container","mt-5","py-5"],["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","expand"],["mat-header-cell","","aria-label","row actions",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","aria-label","row actions"],["mat-icon-button","","aria-label","expand row",1,"btn-icon-table",3,"click"],[4,"ngIf"],[1,""],[1,"row","my-3"],["class","col-9",4,"ngIf"],[1,"col","text-center"],[1,"btn","btn-primary",3,"click"],[1,"col-9"],["class","post-content",4,"ngFor","ngForOf"],[1,"post-content"],[1,"btn","btn-outline-primary","btn-sm","btn-circle","my-2","ms-2",3,"click"],[1,"bi","bi-pencil-fill"],[1,"btn","btn-outline-danger","btn-sm","btn-circle","my-2","ms-2",3,"click"],[1,"bi","bi-trash-fill"],["mat-header-row",""],["mat-row","",1,"example-element-row",3,"click"],["mat-row","",1,"example-detail-row"]],template:function(o,i){1&o&&(t._UZ(0,"app-navbar-private"),t.TgZ(1,"div",0)(2,"table",1),t.YNc(3,N,3,1,"ng-container",2),t.ynx(4,3),t.YNc(5,S,2,0,"th",4),t.YNc(6,k,4,2,"td",5),t.BQk(),t.ynx(7,6),t.YNc(8,Q,8,4,"td",5),t.BQk(),t.YNc(9,q,1,0,"tr",7),t.YNc(10,B,1,2,"tr",8),t.YNc(11,j,1,0,"tr",9),t.qZA()()),2&o&&(t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(1),t.Q6J("ngForOf",i.columnsToDisplay),t.xp6(6),t.Q6J("matHeaderRowDef",i.columnsToDisplayWithExpand),t.xp6(1),t.Q6J("matRowDefColumns",i.columnsToDisplayWithExpand),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(5,R)))},dependencies:[f.sg,f.O5,O.Hw,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,M,f.rS],styles:["table[_ngcontent-%COMP%]{width:100%}tr.example-detail-row[_ngcontent-%COMP%]{height:0}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:whitesmoke}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):active{background:#efefef}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-description[_ngcontent-%COMP%]{padding:16px}.example-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}.post-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.post-content[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px #c1c1c1 dashed}"],data:{animation:[(0,m.X$)("detailExpand",[(0,m.SB)("collapsed",(0,m.oB)({height:"0px",minHeight:"0"})),(0,m.SB)("expanded",(0,m.oB)({height:"*"})),(0,m.eR)("expanded <=> collapsed",(0,m.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}})}return n})()}];let z=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[_.Bz.forChild(H),f.ez,_.Bz]})}return n})();var G=a(8135);let X=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({providers:[Z,x],imports:[f.ez,z,G.h,c.UX,U.JF]})}return n})()}}]);